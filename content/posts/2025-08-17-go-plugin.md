+++
title = 'Go Plugin'
date = 2025-08-17T20:40:01+08:00
draft = false

tags = ["Go","plugin"]
categories = ["Go Plugin"]

+++
go plugin

```
[serialt@Krab plugin]🐳 tree .
.
├── go.mod
├── kk
│   ├── kk.go
│   └── kk.so
├── ks
└── main.go
```

```go
// kk.go
package main

import "fmt"

func Greet(name string) {
	fmt.Println("Hello", name)
}

func main() {}


// main.go
package main

import (
	"log"
	"plugin"
)

func main() {
	p, err := plugin.Open("./kk/kk.so")
	if err != nil {
		log.Fatal(err)
	}
	greet, err := p.Lookup("Greet")
	if err != nil {
		log.Fatal(err)
	}
	greet.(func(string))("Go")
}

```

编译插件

```
cd kk && go build -buildmode=plugin 
```

编译主服务调用插件

```
[root@Krab plugin]🐳 go build 
[root@Krab plugin]🐳 ./ks 
Hello Go
```

