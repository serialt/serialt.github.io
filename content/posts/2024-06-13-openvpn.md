

### ccd ip 使用

openvpn配置客户端静态IP



#### 1）在配置文件中添加一个目录

```shell
cd /etc/openvpn
# server.conf
client-config-dir ccd
```



#### 2）创建目录

```shell
mkdir -p /etc/openvpn/ccd
```



#### 3）创建文件配置客户端IP

这里需要注意，创建的这个文件就是用你的用户名，比如这里我的用户名是liao，那么创建的文件也是liao

```
touch /etc/openvpn/ccd/liao
```

内容写入，ifconfig-push中的每一对IP地址表示虚拟客户端和服务器的IP端点

```
echo “ifconfig-push 10.8.0.5 10.8.0.6” > /etc/openvpn/ccd/liao
```

注意：这里分配的IP规则如下

```
# ifconfig-push中的每一对IP地址表示虚拟客户端和服务器的IP端点
# 它们必须从连续的/30子网网段中获取(这里是/30表示xxx.xxx.xxx.xxx/30，即子网掩码位数为30)
# 以便于与Windows客户端和TAP-Windows驱动兼容。明确地说，每个端点的IP地址对的最后8位字节必须取自下面的集合：

[  1,  2]   [  5,  6]   [  9, 10]   [ 13, 14]   [ 17, 18]

[ 21, 22]   [ 25, 26]   [ 29, 30]   [ 33, 34]   [ 37, 38]

[ 41, 42]   [ 45, 46]   [ 49, 50]   [ 53, 54]   [ 57, 58]

[ 61, 62]   [ 65, 66]   [ 69, 70]   [ 73, 74]   [ 77, 78]

[ 81, 82]   [ 85, 86]   [ 89, 90]   [ 93, 94]   [ 97, 98]

[101,102]   [105,106]   [109,110]   [113,114]   [117,118]

[121,122]   [125,126]   [129,130]   [133,134]   [137,138]

[141,142]   [145,146]   [149,150]   [153,154]   [157,158]

[161,162]   [165,166]   [169,170]   [173,174]   [177,178]

[181,182]   [185,186]   [189,190]   [193,194]   [197,198]

[201,202]   [205,206]   [209,210]   [213,214]   [217,218]

[221,222]   [225,226]   [229,230]   [233,234]   [237,238]

[241,242]   [245,246]   [249,250]   [253,254]


```

#### 4）重启生效

```
systemctl restart openvpn@server
```

总结：这里需要注意的是分配静态IP的时候需要参考文章中的注意点，按对应分配否则会出现兼容问题或者连接不上情况

