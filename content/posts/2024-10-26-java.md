+++
title = 'Java Basic'
date = 2024-10-26T19:38:01+08:00
draft = false

tags = ["Java"]
categories = ["Java åŸºç¡€"]

+++

## Java



é…ç½®settings

é»˜è®¤è¯»å–ä½ç½®

* ~/.m2

```xml
curl -O https://repo1.maven.org/maven2/archetype-catalog.xml

<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 https://maven.apache.org/xsd/settings-1.0.0.xsd">
  <localRepository>/home/sugar/.m2/repository</localRepository>
  <mirrors>
    <mirror>
      <id>alimaven</id>
      <mirrorOf>central</mirrorOf>
      <name>aliyun maven</name>
      <url>https://maven.aliyun.com/nexus/content/groups/public/</url>
    </mirror>
  </mirrors>
  <profiles>
    <profile>
      <id>archetype-catalog</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <properties>
        <archetypeCatalog>file:///Users/sugar/.m2/archetype-catalog.xml</archetypeCatalog>
      </properties>
    </profile>
  </profiles>
</settings>
```

```shell
# æ‰‹åŠ¨ä¸‹è½½ä¾èµ–
mvn -B -f pom.xml -s /usr/share/maven/ref/settings.xml dependency:resolve

# æ‰“åŒ…
mvn package
```



## ä¸€ã€åŸºç¡€

1ã€helloworld

java çš„åŒ…åéœ€è¦å’Œç›®å½•ä¸€è‡´ï¼Œç±»åéœ€è¦ä¸æ–‡ä»¶åä¸€è‡´

```shell
[sugar@Sugar java]ğŸ³ tree .
.
â””â”€â”€ Hello
    â””â”€â”€ Hello.java

1 directory, 1 file
```

```java
public class Hello {
    public static void main(String[] args) {
        System.out.println("Hello, world!");
    }
}
```

```java
[root@Sugar j1]ğŸ³ java Hello.java
Hello, world!
```



2ã€å˜é‡å®šä¹‰

```java
int n = 100;
n = 200; // å˜é‡nèµ‹å€¼ä¸º200
int i2 = -2147483648;
int i3 = 2_000_000_000; // åŠ ä¸‹åˆ’çº¿æ›´å®¹æ˜“è¯†åˆ«
int i4 = 0xff0000; // åå…­è¿›åˆ¶è¡¨ç¤ºçš„16711680
int i5 = 0b1000000000; // äºŒè¿›åˆ¶è¡¨ç¤ºçš„512

long n1 = 9000000000000000000L; // longå‹çš„ç»“å°¾éœ€è¦åŠ L
long n2 = 900; // æ²¡æœ‰åŠ Lï¼Œæ­¤å¤„900ä¸ºintï¼Œä½†intç±»å‹å¯ä»¥èµ‹å€¼ç»™long
int i6 = 900L; // é”™è¯¯ï¼šä¸èƒ½æŠŠlongå‹èµ‹å€¼ç»™int

float f1 = 3.14f;
float f2 = 3.14e38f; // ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºçš„3.14x10^38
float f3 = 1.0; // é”™è¯¯ï¼šä¸å¸¦fç»“å°¾çš„æ˜¯doubleç±»å‹ï¼Œä¸èƒ½èµ‹å€¼ç»™float

double d = 1.79e308;
double d2 = -1.79e308;
double d3 = 4.9e-324; // ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºçš„4.9x10^-324

boolean b1 = true;
boolean b2 = false;
boolean isGreater = 5 > 3; // è®¡ç®—ç»“æœä¸ºtrue
int age = 12;
boolean isAdult = age >= 18; // è®¡ç®—ç»“æœä¸ºfalse

final double PI = 3.14; // PIæ˜¯ä¸€ä¸ªå¸¸é‡
double r = 5.0;
double area = PI * r * r;

var sb = new StringBuilder();

String s = "hello";
final double PI = 3.14; // PIæ˜¯ä¸€ä¸ªå¸¸é‡

// åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡
Pet dog = new Pet();
// åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„
int[] arr = new int[10];

String wepublic = "github";
String wepublic = new String();
String wepublic = new String("github");
```

```java
public class RunoobTest {
    // æˆå‘˜å˜é‡
    private int instanceVar;
    // é™æ€å˜é‡
    private static int staticVar;
    
    public void method(int paramVar) {
        // å±€éƒ¨å˜é‡
        int localVar = 10;
        
        // ä½¿ç”¨å˜é‡
        instanceVar = localVar;
        staticVar = paramVar;
        
        System.out.println("æˆå‘˜å˜é‡: " + instanceVar);
        System.out.println("é™æ€å˜é‡: " + staticVar);
        System.out.println("å‚æ•°å˜é‡: " + paramVar);
        System.out.println("å±€éƒ¨å˜é‡: " + localVar);
    }
    
    public static void main(String[] args) {
        RunoobTest v = new RunoobTest();
        v.method(20);
    }
}
```

ä¸‰å…ƒè¿ç®—

```java
public class Main {
    public static void main(String[] args) {
        int n = -100;
        int x = n >= 0 ? n : -n;
        System.out.println(x);
    }
}
```

æ•°ç»„

```java
public class Main {
    public static void main(String[] args) {
        // 5ä½åŒå­¦çš„æˆç»©:
        int[] ns;
        ns = new int[] { 68, 79, 91, 85, 62 };
        System.out.println(ns.length); // 5
        ns = new int[] { 1, 2, 3 };
        System.out.println(ns.length); // 3
    }
}
```



**æµç¨‹æ§åˆ¶**

```java
public class Main {
    public static void main(String[] args) {
        System.out.print("A,");
        System.out.print("B,");
        System.out.println("END");
    }
}


// æ ¼å¼åŒ–è¾“å‡º
public class Main {
    public static void main(String[] args) {
        double d = 3.1415926;
        System.out.printf("%.2f\n", d); // æ˜¾ç¤ºä¸¤ä½å°æ•°3.14
        System.out.printf("%.4f\n", d); // æ˜¾ç¤º4ä½å°æ•°3.1416
    }
}

// è¾“å…¥
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in); // åˆ›å»ºScannerå¯¹è±¡
        System.out.print("Input your name: "); // æ‰“å°æç¤º
        String name = scanner.nextLine(); // è¯»å–ä¸€è¡Œè¾“å…¥å¹¶è·å–å­—ç¬¦ä¸²
        System.out.print("Input your age: "); // æ‰“å°æç¤º
        int age = scanner.nextInt(); // è¯»å–ä¸€è¡Œè¾“å…¥å¹¶è·å–æ•´æ•°
        System.out.printf("Hi, %s, you are %d\n", name, age); // æ ¼å¼åŒ–è¾“å‡º
    }
}

// if
public class Main {
    public static void main(String[] args) {
        int n = 70;
        if (n >= 60) {
            System.out.println("åŠæ ¼äº†");
        } else {
            System.out.println("æŒ‚ç§‘äº†");
        }
        System.out.println("END");
    }
}


// switch
// switch
public class Main {
    public static void main(String[] args) {
        int option = 1;
        switch (option) {
        case 1:
            System.out.println("Selected 1");
            break;
        case 2:
            System.out.println("Selected 2");
            break;
        case 3:
            System.out.println("Selected 3");
            break;
        }
        
        
        switch (grade / 10) {
            case 10,9 -> System.out.println("è¯¥å­¦ç”Ÿæˆç»©ä¼˜ç§€");
            case 8 -> System.out.println("è¯¥å­¦ç”Ÿæˆç»©è‰¯å¥½");
            case 7 -> System.out.println("è¯¥å­¦ç”Ÿæˆç»©ä¸­ç­‰");
            case 6 -> System.out.println("è¯¥å­¦ç”Ÿæˆç»©åŸºæœ¬åˆæ ¼");
            default -> System.out.println("è¯¥å­¦ç”Ÿæˆç»©ä¸åˆæ ¼");

    }
}


// while
public class Main {
	public static void main(String[] args) {
		int sum = 0;
		int m = 20;
		int n = 100;
		// ä½¿ç”¨whileè®¡ç®—M+...+N:
		while (false) {
		}
		System.out.println(sum);
	}
}

// do-while
public class Main {
    public static void main(String[] args) {
        int sum = 0;
        int n = 1;
        do {
            sum = sum + n;
            n ++;
        } while (n <= 100);
        System.out.println(sum);
    }
}

// for
public class Main {
    public static void main(String[] args) {
        int sum = 0;
        for (int i=1; i<=100; i++) {
            sum = sum + i;
        }
        System.out.println(sum);
    }
}

// ä¸è®¾ç½®ç»“æŸæ¡ä»¶:
for (int i=0; ; i++) {
    ...
}
// ä¸è®¾ç½®ç»“æŸæ¡ä»¶å’Œæ›´æ–°è¯­å¥:
for (int i=0; ;) {
    ...
}
// ä»€ä¹ˆéƒ½ä¸è®¾ç½®:
for (;;) {
    ...
}

// for each
public class Main {
    public static void main(String[] args) {
        int[] ns = { 1, 4, 9, 16, 25 };
        for (int n : ns) {
            System.out.println(n);
        }
    }
}

public class Main {
    public static void main(String[] args) {
        int[] numbers = {1, 4, 5, 6, 9, 10};
        for (int number : numbers) {
            System.out.print(number + "\t");
        }
    }
}
```

æ•°ç»„æ“ä½œ

```java
int[] ns = { 1, 1, 2, 3, 5, 8 };
for (int n : ns) {
    System.out.print(n + ", ");
}
// éå†æ•°ç»„
import java.util.Arrays;

// æ ‡å‡†åº“æ“ä½œ

public class Main {
    public static void main(String[] args) {
        int[] ns = { 1, 1, 2, 3, 5, 8 };
        System.out.println(Arrays.toString(ns));
    }
}

public class EnforceTraverseTest {
    public static void main(String[] args) {
        String[] arr = new String[5];
        arr = new String[]{"æ‘é›¨é¥", "æµ·è´¼ç‹", "è¿›å‡»çš„å·¨äºº", "é¬¼ç­ä¹‹åˆƒ", "æ–—ç½—å¤§é™†"};
        int index = 0;
        for (String name : arr) {
            System.out.println("ç¬¬ " + (index + 1) + " ä¸ªå…ƒç´ ï¼š" + name);
            index++;
        }
    }
}
```

é¢å‘å¯¹è±¡

```java
// æ„é€ æ–¹æ³•
public class Main {
    public static void main(String[] args) {
        Person p = new Person("Xiao Ming", 15);
        System.out.println(p.getName());
        System.out.println(p.getAge());
    }
}

class Person {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }
    
    public String getName() {
        return this.name;
    }

    public int getAge() {
        return this.age;
    }
}

// æ„é€ æ–¹æ³•ï¼Œä¸ç±»åç›¸åŒ
class Person {
    public Person() {
    }
}


// å¤šä¸ªæ„é€ æ–¹æ³•
class Person {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public Person(String name) {
        this(name, 18); // è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•Person(String, int)
    }

    public Person() {
        this("Unnamed"); // è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•Person(String)
    }
}

// æ–¹æ³•é‡è½½ Overload
class Hello {
    public void hello() {
        System.out.println("Hello, world!");
    }

    public void hello(String name) {
        System.out.println("Hello, " + name + "!");
    }

    public void hello(String name, int age) {
        if (age < 18) {
            System.out.println("Hi, " + name + "!");
        } else {
            System.out.println("Hello, " + name + "!");
        }
    }
}



// ç»§æ‰¿
class Person {
    private String name;
    private int age;

    public String getName() {...}
    public void setName(String name) {...}
    public int getAge() {...}
    public void setAge(int age) {...}
}

class Student extends Person {
    // ä¸è¦é‡å¤nameå’Œageå­—æ®µ/æ–¹æ³•,
    // åªéœ€è¦å®šä¹‰æ–°å¢scoreå­—æ®µ/æ–¹æ³•:
    private int score;

    public int getScore() { â€¦ }
    public void setScore(int score) { â€¦ }
}

// é‡å†™
class Student extends Person {
    @Override
    public void run() {
        System.out.println("Student.run");
    }
}
```

javaæ ¸å¿ƒç±»

```java
// String
String

// StringBuilder
// é“¾å¼æ“ä½œ
public class Main {
    public static void main(String[] args) {
        var sb = new StringBuilder(1024);
        sb.append("Mr ")
          .append("Bob")
          .append("!")
          .insert(0, "Hello, ");
        System.out.println(sb.toString());
    }
}

// StringJoiner
import java.util.StringJoiner;
public class Main {
    public static void main(String[] args) {
        String[] names = {"Bob", "Alice", "Grace"};
        var sj = new StringJoiner(", ");
        for (String name : names) {
            sj.add(name);
        }
        System.out.println(sj.toString());
    }
}
```

æšä¸¾ç±»

```java
public class Weekday {
    public static final int SUN = 0;
    public static final int MON = 1;
    public static final int TUE = 2;
    public static final int WED = 3;
    public static final int THU = 4;
    public static final int FRI = 5;
    public static final int SAT = 6;
}

public class Color {
    public static final String RED = "r";
    public static final String GREEN = "g";
    public static final String BLUE = "b";
}
```

```java
// exception
public class Main {
    public static void main(String[] args) {
        try {
            process1();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    static void process1() {
        process2();
    }

    static void process2() {
        Integer.parseInt(null); // ä¼šæŠ›å‡ºNumberFormatException
    }
}
```



listä½¿ç”¨

```java
// æ‹¼æ¥å­—ç¬¦ä¸²
List<String> dd = new ArrayList<>();
dd.add(aa);
String msg = String.join("-", dd);


public class EnhanceForTest {
    public static void main(String[] args) {
        ArrayList<Integer> list = new ArrayList<>();
        list.add(1);
        list.add(3);
        for (Integer element : list) {
            System.out.println(element);
        }
    }
}

// è¿­ä»£å™¨
public class IterTest {
    public static void main(String[] args) {
        ArrayList<Integer> list = new ArrayList<>();
        list.add(1);
        list.add(2);
        list.add(3);
        Iterator<Integer> iter = list.iterator();
        while (iter.hasNext()) {
            System.out.println(iter.next());
        }
    }
}
```

map ä½¿ç”¨

* `HashMap`ï¼šæ— åºï¼Œå…è®¸ null é”®å’Œå¤šä¸ª null å€¼ï¼Œæ€§èƒ½æœ€å¥½ã€‚

* `TreeMap`ï¼šæœ‰åºï¼ˆæ ¹æ® key çš„è‡ªç„¶é¡ºåºæˆ–è‡ªå®šä¹‰ Comparatorï¼‰ã€‚

* `LinkedHashMap`ï¼šæŒ‰æ’å…¥é¡ºåºæ’åˆ—ã€‚

* `ConcurrentHashMap`ï¼šçº¿ç¨‹å®‰å…¨çš„é«˜æ€§èƒ½å¹¶å‘ Mapã€‚

```java
public class MapExample {
    public static void main(String[] args) {
        Map<String, Integer> map = new HashMap<>();     
        map.put("apple", 3);
        map.put("banana", 5);
        map.put("orange", 2);      
        System.out.println(map); // è¾“å‡º: {orange=2, banana=5, apple=3}ï¼ˆæ— åºï¼‰
    }
}

// è·å–å€¼
int count = map.get("banana");  // 5
Integer missing = map.getOrDefault("grape", 0); // å¦‚æœæ²¡æœ‰å°±è¿”å›é»˜è®¤å€¼

// éå†map
for (Map.Entry<String, Integer> entry : map.entrySet()) {
    System.out.println(entry.getKey() + " = " + entry.getValue());
}

// éå† key
for (String key : map.keySet()) {
    System.out.println("Key: " + key);
}

// éå† value
for (Integer value : map.values()) {
    System.out.println("Value: " + value);
}

// åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨
map.containsKey("apple");   // true
map.containsValue(5);       // true

// åˆ é™¤å…ƒç´ 
map.remove("banana");  // åˆ é™¤ banana å¯¹åº”çš„é”®å€¼å¯¹
```

set

```java
Set<String> set = new HashSet<>();
set.add("apple");
set.add("banana");
set.add("apple"); // è¢«å¿½ç•¥

System.out.println(set); // [banana, apple]ï¼ˆé¡ºåºä¸ä¿è¯ï¼‰
```

é˜Ÿåˆ—

```java
Queue<String> queue = new LinkedList<>();
queue.offer("apple");
queue.offer("banana");
System.out.println(queue.poll()); // apple
System.out.println(queue.poll()); // banana
```

try-catch

```java
try{
	xxxx;
}catch (IOException e) {
           throw e;
        }

// try-catch åŠ æ¡ä»¶åˆ¤æ–­
try("aaa"=="aaa"){
	xxxx;
}catch (IOException e) {
           throw e;
        }
```

