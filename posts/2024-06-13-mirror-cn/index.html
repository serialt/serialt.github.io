<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>To-mirror - Blog</title><meta name="Description" content="This is my cool site"><meta property="og:title" content="To-mirror" />
<meta property="og:description" content="操作系统或者软件换源加速 1、操作系统 rocky # 8 base sed -e &#39;s|^mirrorlist=|#mirrorlist=|g&#39; \ -e &#39;s|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.ustc.edu.cn/rocky|g&#39; \ -i.bak /etc/yum.repos.d/Rocky*.repo # 8 epel sed -e &#39;s|^metalink=|#metalink=|g&#39; \ -e &#39;s|^#baseurl=https\?://download.fedoraproject.org/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#39; \ -e &#39;s|^#baseurl=https\?://download.example/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#39; \ -i.bak /etc/yum.repos.d/epel*.repo # 9 base sed -e &#39;s|^mirrorlist=|#mirrorlist=|g&#39; \ -e &#39;s|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.ustc.edu.cn/rocky|g&#39; \ -i.bak /etc/yum.repos.d/rocky*.repo # 9 epel sed -e &#39;s|^metalink=|#metalink=|g&#39; \ -e &#39;s|^#baseurl=https\?://download.fedoraproject.org/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#39; \ -e &#39;s|^#baseurl=https\?://download.example/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#39;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://serialt.github.io/posts/2024-06-13-mirror-cn/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-06-13T21:00:42+08:00" />
<meta property="article:modified_time" content="2024-06-13T21:00:42+08:00" /><meta property="og:site_name" content="Log" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="To-mirror"/>
<meta name="twitter:description" content="操作系统或者软件换源加速 1、操作系统 rocky # 8 base sed -e &#39;s|^mirrorlist=|#mirrorlist=|g&#39; \ -e &#39;s|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.ustc.edu.cn/rocky|g&#39; \ -i.bak /etc/yum.repos.d/Rocky*.repo # 8 epel sed -e &#39;s|^metalink=|#metalink=|g&#39; \ -e &#39;s|^#baseurl=https\?://download.fedoraproject.org/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#39; \ -e &#39;s|^#baseurl=https\?://download.example/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#39; \ -i.bak /etc/yum.repos.d/epel*.repo # 9 base sed -e &#39;s|^mirrorlist=|#mirrorlist=|g&#39; \ -e &#39;s|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.ustc.edu.cn/rocky|g&#39; \ -i.bak /etc/yum.repos.d/rocky*.repo # 9 epel sed -e &#39;s|^metalink=|#metalink=|g&#39; \ -e &#39;s|^#baseurl=https\?://download.fedoraproject.org/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#39; \ -e &#39;s|^#baseurl=https\?://download.example/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#39;"/>
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://serialt.github.io/posts/2024-06-13-mirror-cn/" /><link rel="prev" href="https://serialt.github.io/posts/2024-06-13-containerd/" /><link rel="next" href="https://serialt.github.io/posts/2024-06-16-nexus/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "To-mirror",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/serialt.github.io\/posts\/2024-06-13-mirror-cn\/"
        },"genre": "posts","keywords": "mirror, source, mirror-to-cn","wordcount":  537 ,
        "url": "https:\/\/serialt.github.io\/posts\/2024-06-13-mirror-cn\/","datePublished": "2024-06-13T21:00:42+08:00","dateModified": "2024-06-13T21:00:42+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "serialt"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Blog">记录</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Blog">记录</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">To-mirror</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>serialt</a></span>&nbsp;<span class="post-category">included in <a href="/categories/%E7%B3%BB%E7%BB%9F%E6%88%96%E8%BD%AF%E4%BB%B6%E6%8D%A2%E6%BA%90/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>系统或软件换源</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2024-06-13">2024-06-13</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;537 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;2 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1操作系统">1、操作系统</a>
      <ul>
        <li><a href="#rocky">rocky</a></li>
        <li><a href="#ubuntu">ubuntu</a></li>
        <li><a href="#debian">debian</a></li>
        <li><a href="#alpine">alpine</a></li>
      </ul>
    </li>
    <li><a href="#2开发语言类">2、开发语言类</a></li>
    <li><a href="#3容器代理">3、容器代理</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="操作系统或者软件换源加速">操作系统或者软件换源加速</h1>
<h2 id="1操作系统">1、操作系统</h2>
<h3 id="rocky">rocky</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 8 base</span>
</span></span><span class="line"><span class="cl">sed -e <span class="s1">&#39;s|^mirrorlist=|#mirrorlist=|g&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="s1">&#39;s|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.ustc.edu.cn/rocky|g&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -i.bak   /etc/yum.repos.d/Rocky*.repo 
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl"><span class="c1"># 8 epel</span>
</span></span><span class="line"><span class="cl">sed -e <span class="s1">&#39;s|^metalink=|#metalink=|g&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="s1">&#39;s|^#baseurl=https\?://download.fedoraproject.org/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="s1">&#39;s|^#baseurl=https\?://download.example/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -i.bak  /etc/yum.repos.d/epel*.repo
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 9 base</span>
</span></span><span class="line"><span class="cl">sed -e <span class="s1">&#39;s|^mirrorlist=|#mirrorlist=|g&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="s1">&#39;s|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.ustc.edu.cn/rocky|g&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -i.bak   /etc/yum.repos.d/rocky*.repo 
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1"># 9 epel</span>
</span></span><span class="line"><span class="cl">sed -e <span class="s1">&#39;s|^metalink=|#metalink=|g&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="s1">&#39;s|^#baseurl=https\?://download.fedoraproject.org/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="s1">&#39;s|^#baseurl=https\?://download.example/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -i.bak /etc/yum.repos.d/epel*.repo
</span></span></code></pre></div><h3 id="ubuntu">ubuntu</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># http</span>
</span></span><span class="line"><span class="cl">sed -e <span class="s2">&#34;s@http://.*archive.ubuntu.com@http://mirrors.aliyun.com@g&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="s2">&#34;s@http://.*security.ubuntu.com@http://mirrors.aliyun.com@g&#34;</span>  <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -i.bak  -i /etc/apt/sources.list
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># https</span>
</span></span><span class="line"><span class="cl">sed -e <span class="s2">&#34;s@http://.*archive.ubuntu.com@https://mirrors.aliyun.com@g&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -e <span class="s2">&#34;s@http://.*security.ubuntu.com@https://mirrors.aliyun.com@g&#34;</span>  <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -i.bak  -i /etc/apt/sources.list
</span></span></code></pre></div><h3 id="debian">debian</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># debian 12及以上</span>
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;s/\w*.debian.org/mirrors.ustc.edu.cn/g&#39;</span> /etc/apt/sources.list.d/debian.sources 
</span></span><span class="line"><span class="cl">sed -i <span class="s2">&#34;s@http://mirrors.ustc.edu.cn@https://mirrors.ustc.edu.cn@g&#34;</span>  /etc/apt/sources.list.d/debian.sources 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># debian 12以下</span>
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;s/\w*.debian.org/mirrors.ustc.edu.cn/g&#39;</span> /etc/apt/sources.list
</span></span><span class="line"><span class="cl">sed -i <span class="s2">&#34;s@http://mirrors.ustc.edu.cn@https://mirrors.ustc.edu.cn@g&#34;</span> /etc/apt/sources.list
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 通用版</span>
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;s/\w*.debian.org/mirrors.ustc.edu.cn/g&#39;</span>  /etc/apt/sources.list  <span class="o">||</span> sed -i <span class="s1">&#39;s/\w*.debian.org/mirrors.ustc.edu.cn/g&#39;</span> /etc/apt/sources.list.d/debian.sources 
</span></span></code></pre></div><h3 id="alpine">alpine</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># alpine 官方源</span>
</span></span><span class="line"><span class="cl">https://dl-cdn.alpinelinux.org/alpine/v3.18/main
</span></span><span class="line"><span class="cl">https://dl-cdn.alpinelinux.org/alpine/v3.18/community
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ustc</span>
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;s/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g&#39;</span> /etc/apk/repositories
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># edge 源</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;https://mirrors.ustc.edu.cn/alpine/edge/main&#34;</span> &gt;&gt; /etc/apk/repositories
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;https://mirrors.ustc.edu.cn/alpine/edge/community&#34;</span> &gt;&gt; /etc/apk/repositories
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;https://mirrors.ustc.edu.cn/alpine/edge/testing&#34;</span> &gt;&gt; /etc/apk/repositories
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># alpine 容器包</span>
</span></span><span class="line"><span class="cl">apk update --no-cache <span class="o">&amp;&amp;</span> apk add --update --no-cache coreutils ca-certificates <span class="o">&amp;&amp;</span> apk add --no-cache tzdata  coreutils
</span></span></code></pre></div><h2 id="2开发语言类">2、开发语言类</h2>
<p>go</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">GOPROXY</span><span class="o">=</span>https://goproxy.cn,direct
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># aliyun</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">GOPROXY</span><span class="o">=</span>https://mirrors.aliyun.com/goproxy/
</span></span></code></pre></div><p>python</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PIP_MIRROR</span><span class="o">=</span>mirrors.aliyun.com
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;[global]\nindex-url=https://</span><span class="si">${</span><span class="nv">PIP_MIRROR</span><span class="si">}</span><span class="s2">/pypi/simple\n[install]\ntrusted-host=</span><span class="si">${</span><span class="nv">PIP_MIRROR</span><span class="si">}</span><span class="s2">&#34;</span> &gt;  /etc/pip.conf 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 命令配置</span>
</span></span><span class="line"><span class="cl">pip3 install xxx -i https://mirrors.aliyun.com/pypi/simple/
</span></span></code></pre></div><p>npm</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 设置全局</span>
</span></span><span class="line"><span class="cl">npm config <span class="nb">set</span> registry https://registry.npmmirror.com
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># cmd</span>
</span></span><span class="line"><span class="cl">npm install -y  --registry<span class="o">=</span>https://registry.npmmirror.com
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 官方地址</span>
</span></span><span class="line"><span class="cl">https://registry.npmjs.org/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 阿里云地址</span>
</span></span><span class="line"><span class="cl">https://registry.npmmirror.com
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 腾讯</span>
</span></span><span class="line"><span class="cl">http://mirrors.cloud.tencent.com/npm/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 华为</span>
</span></span><span class="line"><span class="cl">https://repo.huaweicloud.com/repository/npm/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 南京大学</span>
</span></span><span class="line"><span class="cl">https://repo.nju.edu.cn/repository/npm/
</span></span></code></pre></div><p>java</p>
<pre tabindex="0"><code>curl -O https://repo1.maven.org/maven2/archetype-catalog.xml
</code></pre><p>settings.xml</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;settings</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/SETTINGS/1.0.0&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/SETTINGS/1.0.0 https://maven.apache.org/xsd/settings-1.0.0.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;localRepository&gt;</span>/home/sugar/.m2/repository<span class="nt">&lt;/localRepository&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;mirrors&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;mirror&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;id&gt;</span>alimaven<span class="nt">&lt;/id&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;mirrorOf&gt;</span>central<span class="nt">&lt;/mirrorOf&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;name&gt;</span>aliyun maven<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;url&gt;</span>https://maven.aliyun.com/nexus/content/groups/public/<span class="nt">&lt;/url&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/mirror&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/mirrors&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;profiles&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;profile&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;id&gt;</span>archetype-catalog<span class="nt">&lt;/id&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;activation&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;activeByDefault&gt;</span>true<span class="nt">&lt;/activeByDefault&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;/activation&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;properties&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;archetypeCatalog&gt;</span>file:///Users/sugar/.m2/archetype-catalog.xml<span class="nt">&lt;/archetypeCatalog&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;/properties&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/profile&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/profiles&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/settings&gt;</span>
</span></span></code></pre></div><pre tabindex="0"><code># 下载依赖
mvn -B -f pom.xml -s /usr/share/maven/ref/settings.xml dependency:resolve
</code></pre><h2 id="3容器代理">3、容器代理</h2>
<p>配置模版</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;insecure-registries&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;repo.local.com&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;exec-opts&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;native.cgroupdriver=systemd&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;registry-mirrors&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://docker.mirrors.sjtug.sjtu.edu.cn&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://docker.nju.edu.cn&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;http://hub-mirror.c.163.com&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;log-driver&#34;</span><span class="p">:</span> <span class="s2">&#34;json-file&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;log-opts&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;max-size&#34;</span><span class="p">:</span> <span class="s2">&#34;100m&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;max-file&#34;</span><span class="p">:</span> <span class="s2">&#34;3&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;bip&#34;</span><span class="p">:</span><span class="s2">&#34;192.161.20.1/24&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;dns&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;119.29.29.29&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;223.5.5.5&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;data-root&#34;</span><span class="p">:</span> <span class="s2">&#34;/var/lib/docker&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;features&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;buildkit&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>docker registry</p>
<pre tabindex="0"><code>国内 docker registry 已暂时无法使用
</code></pre><p>gcr.io</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 上海交大</span>
</span></span><span class="line"><span class="cl">https://gcr-io.mirrors.sjtug.sjtu.edu.cn
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 南京大学</span>
</span></span><span class="line"><span class="cl">https://gcr.nju.edu.cn
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># dockerproxy</span>
</span></span><span class="line"><span class="cl">https://gcr.dockerproxy.com
</span></span></code></pre></div><p>ghcr.io</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 南京大学</span>
</span></span><span class="line"><span class="cl">https://htghcr.nju.edu.cn
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># dockerproxy</span>
</span></span><span class="line"><span class="cl">https://ghcr.dockerproxy.com
</span></span></code></pre></div><p>nvcr.io</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 南京大学</span>
</span></span><span class="line"><span class="cl">https://nvcr.nju.edu.cn
</span></span></code></pre></div><p>quay.io</p>
<pre tabindex="0"><code># 南京大学
https://quay.nju.edu.cn

# dockerproxy
quay.dockerproxy.com
</code></pre><p>registry.k8s.io</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 南京大学</span>
</span></span><span class="line"><span class="cl">k8s.mirror.nju.edu.cn
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># dockerproxy</span>
</span></span><span class="line"><span class="cl">k8s.dockerproxy.com
</span></span></code></pre></div><p>Microsoft Artifact Registry</p>
<pre tabindex="0"><code>mcr.dockerproxy.com
</code></pre><p>同步镜像脚本</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">SRC_REPO</span><span class="o">=</span>swr.cn-east-3.myhuaweicloud.com/serialt
</span></span><span class="line"><span class="cl"><span class="nv">DEST_REPO</span><span class="o">=</span>docker.local.com/lib
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 获取镜像</span>
</span></span><span class="line"><span class="cl"><span class="c1"># docker images --format &#34;table {{.Repository}}:{{.Tag}}&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># registry.cn-hangzhou.aliyuncs.com/serialt/node:v3.22.5</span>
</span></span><span class="line"><span class="cl"><span class="c1"># node:v3.22.5</span>
</span></span><span class="line"><span class="cl"><span class="nv">imageList</span><span class="o">=(</span>
</span></span><span class="line"><span class="cl">golang:1.22.4-alpine
</span></span><span class="line"><span class="cl">golang:1.21-alpine3.18
</span></span><span class="line"><span class="cl">python:3.8-alpine
</span></span><span class="line"><span class="cl">python:3.9-alpine
</span></span><span class="line"><span class="cl"><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> imageName  in <span class="si">${</span><span class="nv">imageList</span><span class="p">[@]</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nv">imageName</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">imageName</span><span class="si">}</span> <span class="p">|</span>awk -F <span class="s1">&#39;/&#39;</span> <span class="s1">&#39;{print $NF}&#39;</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">    docker pull <span class="si">${</span><span class="nv">SRC_REPO</span><span class="si">}</span>/<span class="si">${</span><span class="nv">imageName</span><span class="si">}</span> 
</span></span><span class="line"><span class="cl">    docker tag  <span class="si">${</span><span class="nv">SRC_REPO</span><span class="si">}</span>/<span class="si">${</span><span class="nv">imageName</span><span class="si">}</span>  <span class="si">${</span><span class="nv">DEST_REPO</span><span class="si">}</span>/<span class="si">${</span><span class="nv">imageName</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">    docker push  <span class="si">${</span><span class="nv">DEST_REPO</span><span class="si">}</span>/<span class="si">${</span><span class="nv">imageName</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># docker rmi  ${DEST_REPO}/${imageName}</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><p>v2版</p>
<pre tabindex="0"><code>#!/usr/bin/env bash
imageList=(
local.com/build/alpine:3=docker.local.cc/build/alpine:3
)
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">. images.sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> imageName  in <span class="si">${</span><span class="nv">imageList</span><span class="p">[@]</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nv">SRC_IMAGE</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">imageName</span><span class="si">}</span> <span class="p">|</span> awk -F <span class="s1">&#39;=&#39;</span> <span class="s1">&#39;{print $1}&#39;</span> <span class="sb">`</span>
</span></span><span class="line"><span class="cl">    <span class="nv">DST_IMAGE</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">imageName</span><span class="si">}</span> <span class="p">|</span> awk -F <span class="s1">&#39;=&#39;</span> <span class="s1">&#39;{print $2}&#39;</span> <span class="sb">`</span>
</span></span><span class="line"><span class="cl">    docker pull <span class="si">${</span><span class="nv">SRC_IMAGE</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">    docker tag  <span class="si">${</span><span class="nv">SRC_IMAGE</span><span class="si">}</span> <span class="si">${</span><span class="nv">DST_IMAGE</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">    docker push  <span class="si">${</span><span class="nv">DST_IMAGE</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># docker rmi  ${DEST_REPO}/${imageName}</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2024-06-13</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/mirror/">mirror</a>,&nbsp;<a href="/tags/source/">source</a>,&nbsp;<a href="/tags/mirror-to-cn/">mirror-to-cn</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/2024-06-13-containerd/" class="prev" rel="prev" title="contianerd"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>contianerd</a>
            <a href="/posts/2024-06-16-nexus/" class="next" rel="next" title="Nexus">Nexus<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">serialt</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":80},"comment":{},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
